---
description: WCAG 2.1 AA accessibility standards and implementation guidelines
globs: ["**/*.tsx", "**/*.html", "**/*.css"]
alwaysApply: false
---
# Accessibility (WCAG 2.1 AA) Rules

## Core Principles (POUR)
- **Perceivable**: Content available to senses (sight, hearing, touch)
- **Operable**: Interface components and navigation functional
- **Understandable**: Information and operation clear
- **Robust**: Content works with current and future technologies

## Implementation Checklist

### Semantic HTML
```html
<!-- Use appropriate semantic elements -->
<header>, <nav>, <main>, <article>, <section>, <aside>, <footer>

<!-- Proper heading hierarchy -->
<h1>Page Title</h1>
  <h2>Section</h2>
    <h3>Subsection</h3>
```

### Keyboard Navigation
```typescript
// Ensure all interactive elements are keyboard accessible
<button onClick={handleClick} onKeyDown={handleKeyDown}>
  Action
</button>

// Implement focus management
const modalRef = useRef<HTMLDivElement>(null);
useEffect(() => {
  if (isOpen) modalRef.current?.focus();
}, [isOpen]);

// Skip links for main content
<a href="#main-content" className="sr-only focus:not-sr-only">
  Skip to main content
</a>
```

### ARIA Labels
```html
<!-- Descriptive labels for screen readers -->
<button aria-label="Close notification panel">âœ•</button>

<!-- ARIA live regions for dynamic content -->
<div role="status" aria-live="polite" aria-atomic="true">
  Habit saved successfully
</div>

<!-- ARIA expanded for dropdowns -->
<button aria-expanded={isOpen} aria-controls="dropdown-menu">
  Options
</button>
```

### Color Contrast
- **Normal text**: 4.5:1 contrast ratio minimum
- **Large text** (18pt+): 3:1 contrast ratio
- Don't rely on color alone to convey information
- Test with tools: Lighthouse, axe DevTools

### Form Accessibility
```html
<!-- Associate labels with inputs -->
<label htmlFor="habit-name">Habit Name</label>
<input id="habit-name" type="text" required aria-required="true" />

<!-- Provide error messages -->
<input aria-invalid={hasError} aria-describedby="error-msg" />
<span id="error-msg" role="alert">{errorMessage}</span>
```

### Images & Icons
```html
<!-- Alt text for meaningful images -->
<img src="chart.png" alt="Usage analytics showing 20% reduction in screen time" />

<!-- Empty alt for decorative images -->
<img src="decorative.png" alt="" role="presentation" />

<!-- Icon buttons need text -->
<button aria-label="Delete habit">
  <TrashIcon aria-hidden="true" />
</button>
```

## Testing Strategy
1. **Automated**: Run axe-core, Lighthouse accessibility audit
2. **Keyboard**: Navigate entire app using only keyboard (Tab, Enter, Escape)
3. **Screen Reader**: Test with NVDA (Windows), VoiceOver (Mac), TalkBack (Android)
4. **Visual**: Test with browser zoom at 200%, check color contrast

## React-Specific
```typescript
// Use semantic HTML over divs
<button> instead of <div onClick={...}>

// Focus management in SPAs
useEffect(() => {
  document.title = `${pageName} - Digital Minimalist`;
  mainRef.current?.focus();
}, [pageName]);
```

## See also:
- [306-react-vite-tailwind-rules.mdc](306-react-vite-tailwind-rules.mdc) for implementation details
